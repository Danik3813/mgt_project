# Проект для хакатона Студент года от команды HackStreet Boys.
Тема "Проект нагрузки на дороги и метро"


# [Приложение к проекту(Презентация и видео по развертке решения)][https://disk.yandex.ru/d/xEonpjAWuAtibg]

## Обзор

Проект состоит из двух частей:
- **Фронтенд**: Построен с использованием React, Vite и связанных библиотек.
- **Бэкенд**: Разработан на фреймворке NestJS с использованием TypeORM и PostgreSQL в качестве базы данных.

Проект настроен для одновременного запуска фронтенда и бэкенда с помощью `concurrently`.

## Требования

Для запуска проекта необходимо установить следующие компоненты:
- **Git**
- **Node.js**: Версия 18 или выше (https://nodejs.org/)
- **npm**: Устанавливается вместе с Node.js
- **PostgreSQL 16 и выше**: Установлен и запущен для работы с бэкендом
- **PostGIS**: Расширение для PostgreSQL, которое должно быть установлено и активировано. Это расширение необходимо для работы с географическими данными в базе данных. 

## Структура проекта

- **frontend**: Фронтенд на React.
- **backend-nest**: Бэкенд на NestJS.
- **mgt_project**: Основной проект, который включает в себя запуск фронтенда и бэкенда.

### Структура frontend

Все основные файлы хранятся в директории _src_:

- директория _api_ отвечает за связь баз данных, бэкэнда и фронтенда
- директория _components_ отвечает за отдельные компоненты, отображающиеся на веб-страницах
- директория _pages_ содержит веб-страница проекта
- директория _resources_ содержит SVG-иконки
- директория _styles_ содержит таблицы стилей веб-страниц

### Структура backend-nest

Все основные файлы хранятся в директории _src_:

- директория _configs_ содержит файл конфигурации для корректной работы с БД
- директория _controlles_ содержит контроллеры, отвечающие за обработку запросов
- директория _dto_ отвечает за добавление новых элементов на карту
- директория _entities_ содержит выгруженные данные с БД
- директория _migrations_ содержит файл миграции из БД
- директория _services_ методы для работы с зонами 
- директория _utils_ содержит утилитарный класс, хранящий математическую модель вычисления нагрузки на дорожно-транспортную сеть

## Развертка решения

### 1. Клонирование репозитория
```bash
git clone <URL репозитория>
cd mgt_project
```

### 2. Установка зависимостей

#### Основной проект
Для того чтобы корректно работала команда одновременного запуска фронтенда и бэкенда, необходимо в обязательном порядке установить зависимости для основного проекта, для фронтенда и для бекенда:

#### 1. Устанавливаем зависимости для основного проекта (для одновременного запуска фронтенда и бекенда). Используйте любой терминал для ввода
```bash
npm install
```
#### 2. Устанавливаем зависимости для фронтеда
```bash
cd frontend
npm install
```
#### 3. Устанавливаем зависимости для бекенда
```bash
cd backend-nest
npm install
```

### 3. Настройка базы данных PostgreSQL

1. Убедитесь, что PostgreSQL установлен и запущен.
2. Установите расширение **PostGIS** через Application Stack Builder:
3. Создайте базу данных с любым удобным названием, пропишите в Query Tool созданной Вами БД:
   ```sql
   CREATE EXTENSION postgis;
   ```
4. Настройте параметры подключения к базе данных в файле `backend-nest/src/configs/ormconfig.ts`. Убедитесь, что имена баз данных совпадают и в файл конфигурации введён верный пароль

### 4. Выполнение миграций

Перед запуском бэкенда необходимо выполнить миграции базы данных, чтобы создать все необходимые таблицы и структуры:

1. Установите ts-node для проекта:
   ```bash
   npm install -g ts-node
   ```
2. Выполните миграцию БД:
   ```bash
   cd backend-nest
   ts-node ./node_modules/typeorm/cli.js migration:run -d src/configs/ormconfig.ts
   ```

### 5. Запуск проекта

#### Одновременный запуск фронтенда и бэкенда
Для удобного запуска обоих сервисов одновременно используйте следующую команду в корневой директории проекта:

```bash
npm run all
```

#### Раздельный запуск фронтенда
```bash
npm run frontend
```

#### Раздельный запуск бэкенда
```bash
npm run backend
```
#### Фронтенд находится по адресу http://localhost:3001
#### Документация бекенда находится по адресу http://localhost:3000/api
---
# Тестовые данные для добавления через интерфейс

## Область застройки

### Название: Тестовая зона

#### Координаты:
- **Точка 1**: Широта 55.730473, Долгота 37.612442
- **Точка 2**: Широта 55.735116, Долгота 37.613470
- **Точка 3**: Широта 55.734550, Долгота 37.619225
- **Точка 4**: Широта 55.730086, Долгота 37.623364

# Дороги

### Дорога 1: Большая Якиманка
- **Координаты**:
  - Точка 1: Широта 55.730498, Долгота 37.612141
  - Точка 2: Широта 55.735221, Долгота 37.613348
- **Утренний трафик**: 120 TC в час
- **Вечерний трафик**: 115 TC в час
- **Пропускная способность**: 140 машин в час

### Дорога 2: Житная
- **Координаты**:
  - Точка 1: Широта 55.730338, Долгота 37.612197
  - Точка 2: Широта 55.729972, Долгота 37.623092
- **Утренний трафик**: 90 TC в час
- **Вечерний трафик**: 100 TC в час
- **Пропускная способность**: 120 TC в час

# Метро

### Метро 1: Октябрьская
- **Координаты**: Широта 55.731012, Долгота 37.612205
- **Утренний трафик**: 4.3 тысяч человек в час
- **Вечерний трафик**: 5.2 тысяч человек в час
- **Пропускная способность**: 7 тысяч человек в час

### Метро 2: Полянка
- **Координаты**: Широта 55.736899, Долгота 37.618601
- **Утренний трафик**: 3.6 тысяч человек в час
- **Вечерний трафик**: 4.8 тысяч человек в час
- **Пропускная способность**: 6 тысяч человек в час

# Площадь

### Площадь 1
- **Площадь**: 100 000 ч
- **Тип**: Категория 1

### Площадь 2
- **Площадь**: 200 000 ч
- **Тип**: Офисные здания


## Состав команды 
 - Андрей Стародубов (@andrew-dot-exe)
 - Даниил Купцов (@Danik3813)
 - Дмитрий Никифоров (@DimaNik5)
 - Никита Ярощук (@howwow0)
 
&copy; HackStreet Boys, 2024.
