# Проект для хакатона Студент года от команды HackStreet Boys.
Тема "Проект нагрузки на дороги и метро"


## Обзор

Проект состоит из двух частей:
- **Фронтенд**: Построен с использованием React, Vite и связанных библиотек.
- **Бэкенд**: Разработан на фреймворке NestJS с использованием TypeORM и PostgreSQL в качестве базы данных.

Проект настроен для одновременного запуска фронтенда и бэкенда с помощью `concurrently`.

## Требования

Для запуска проекта необходимо установить следующие компоненты:

- **Node.js**: Версия 18 или выше (https://nodejs.org/)
- **npm**: Устанавливается вместе с Node.js
- **PostgreSQL 16 и выше**: Установлен и запущен для работы с бэкендом
- **PostGIS**: Расширение для PostgreSQL, которое должно быть установлено и активировано. Это расширение необходимо для работы с географическими данными в базе данных. 

## Структура проекта

- **frontend**: Фронтенд на React.
- **backend-nest**: Бэкенд на NestJS.
- **mgt_project**: Основной проект, который включает в себя запуск фронтенда и бэкенда.

### Структура frontend

Все основные файлы хранятся в директории _src_:

- директория _api_ отвечает за связь баз данных, бэкэнда и фронтенда
- директория _components_ отвечает за отдельные компоненты, отображающиеся на веб-страницах
- директория _pages_ содержит веб-страница проекта
- директория _resources_ содержит SVG-иконки
- директория _styles_ содержит таблицы стилей веб-страниц

### Структура backend-nest

Все основные файлы хранятся в директории _src_:

- директория _configs_ содержит файл конфигурации для корректной работы с БД
- директория _controlles_ содержит контроллеры, отвечающие за обработку запросов
- директория _dto_ отвечает за добавление новых элементов на карту
- директория _entities_ содержит выгруженные данные с БД
- директория _migrations_ содержит файл миграции из БД
- директория _services_ методы для работы с зонами 
- директория _utils_ содержит утилитарный класс, хранящий математическую модель вычисления нагрузки на дорожно-транспортную сеть

## Развертка решения

### 1. Клонирование репозитория
```bash
git clone <URL репозитория>
cd mgt_project
```

### 2. Установка зависимостей

#### Основной проект
Для того чтобы корректно работала команда одновременного запуска фронтенда и бэкенда, необходимо в обязательном порядке установить зависимости для основного проекта, для фронтенда и для бекенда:

#### 1. Устанавливаем зависимости для основного проекта (для одновременного запуска фронтенда и бекенда). Используйте любой терминал для ввода
```bash
npm install
```
#### 2. Устанавливаем зависимости для фронтеда
```bash
cd frontend
npm install
```
#### 3. Устанавливаем зависимости для бекенда
```bash
cd backend-nest
npm install
```

### 3. Настройка базы данных PostgreSQL

1. Убедитесь, что PostgreSQL установлен и запущен.
2. Установите расширение **PostGIS** через Application Stack Builder:
3. Создайте базу данных с любым удобным названием, пропишите в Query Tool созданной Вами БД:
   ```sql
   CREATE EXTENSION postgis;
   ```
4. Настройте параметры подключения к базе данных в файле `backend-nest/src/configs/ormconfig.ts`. Убедитесь, что имена баз данных совпадают и в файл конфигурации введён верный пароль

### 4. Выполнение миграций

Перед запуском бэкенда необходимо выполнить миграции базы данных, чтобы создать все необходимые таблицы и структуры:

1. Установите ts-node для проекта:
   ```bash
   npm install -g ts-node
   ```
2. Выполните миграцию БД:
   ```bash
   cd backend-nest
   ts-node ./node_modules/typeorm/cli.js migration:run -d src/configs/ormconfig.ts
   ```

### 5. Запуск проекта

#### Одновременный запуск фронтенда и бэкенда
Для удобного запуска обоих сервисов одновременно используйте следующую команду в корневой директории проекта:

```bash
npm run all
```

#### Раздельный запуск фронтенда
```bash
npm run frontend
```

#### Раздельный запуск бэкенда
```bash
npm run backend
```

---
## Состав команды 
 - Андрей Стародубов (@andrew-dot-exe)
 - Даниил Купцов (@Danik3813)
 - Дмитрий Никифоров (@DimaNik5)
 - Никита Ярощук (@howwow0)
 
&copy; HackStreet Boys, 2024.
